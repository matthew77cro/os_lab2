
<!-- saved from url=(0056)http://zemris.fer.hr/predmeti/os/pripreme/upute/TAS.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<meta http-equiv="Content-Language" content="hr">

<title>TAS</title>
</head>

<body style="">

<h2>Nedjeljiva operacija <i>Ispitaj i postavi (TAS)</i></h2>
<p>Programski prevoditelj gcc pruža moguænost izvoðenja
<a href="https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html">
nedjeljivih (atomic) funkcija</a>.<br>
Jedna od takvih funkcija je <i>Ispitaj i postavi (engl. Test And Set, TAS)</i>:</p>
<p><font face="Courier New" size="2">bool&nbsp;<b>__atomic_test_and_set</b>&nbsp;(void *ptr, int memorder);</font></p>
<p>koja služi za sinkronizaciju kritiènih odsjeèaka. <br>
Za poziv navedene funkcije nije potrebno ukljuèiniti nikakvu dodatnu biblioteku, 
veæ je dovoljno na poèetku programa definirati makro funkciju. <br>
Primjerice, ako makro funkciju nazovemo <i>TAS</i>, tada æe definicija te 
funkcije glasiti ovako:</p>
<pre>#define TAS(ZASTAVICA) __atomic_test_and_set (&amp;ZASTAVICA, __ATOMIC_SEQ_CST)</pre>
<p>Potom se navedena makro funkcija koristi u programu primjerice ovako:</p>
<pre>char zastavica = 0; //globalna varijabla ili zajednièka kod procesa </pre>
<pre>while ( TAS(zastavica) != 0 )   &nbsp;; // radno èekanje </pre>




</body></html>